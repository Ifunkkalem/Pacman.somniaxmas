<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
<title>Somnia Christmas ‚Äî Pacman</title>

<script src="libs/ethers.min.js"></script>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:Trebuchet MS,sans-serif}

body{
  min-height:100vh;
  background:linear-gradient(to right,#fff,#ff0000);
  color:#fff;
  overflow-x:hidden;
}

/* ==== LAYOUT UTAMA ==== */
#wrap{display:flex;min-height:100vh;width:100%}

#sidebar{
  width:160px;
  background:#fff;
  color:#000;
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

#main{
  flex:1;
  padding:10px;
  display:flex;
  flex-direction:column;
  align-items:center;
  background:linear-gradient(to bottom,#ff0000,#800000);
  position:relative;
}

button{
  padding:10px;
  border-radius:8px;
  border:none;
  background:linear-gradient(90deg,red,green);
  color:#fff;
  cursor:pointer;
  font-weight:bold;
}

#title{
  color:#00ffae;
  font-size:26px;
  margin-bottom:10px;
}

.footer{
  margin-top:10px;
  color:#0ff;
  text-shadow:0 0 4px #0ff;
  font-size:12px;
}

/* ==== AREA UTAMA (LOGO / GAME / LEADERBOARD) ==== */
.content-area{
  width:100%;
  max-width:480px;
  aspect-ratio:1/1;
  background:rgba(0,0,0,0.25);
  border-radius:12px;
  overflow:hidden;
  position:relative;
}

iframe{
  width:100%;
  height:100%;
  border:0;
  display:none;
}

/* ==== POSTER LOGO ==== */
#logoPlaceholder{
  width:100%;
  height:100%;
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
}

#logoPlaceholder img{
  width:100%;
  height:100%;
  object-fit:cover;
}

#poster-overlay{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:space-between;
  align-items:center;
  text-align:center;
  padding:20px;
  text-shadow:0 0 5px black;
}

#poster-overlay h2{font-size:1.6em;color:#facc15}
#poster-overlay p{font-size:1em}

.overlay-cta{
  padding:12px 30px;
  font-size:1.1em;
  font-weight:bold;
  border-radius:8px;
}

/* ==== MOBILE LOCK ==== */
@media (max-width:768px){
  #wrap{flex-direction:column}
  #sidebar{
    width:100%;
    flex-direction:row;
    justify-content:space-around;
    flex-wrap:wrap;
  }

  #walletAddr,#walletBal{display:none}
}
</style>
</head>

<body>
<div id="wrap">

  <div id="sidebar">
    <button id="btnConnect">Connect Wallet</button>
    <div id="walletAddr">Wallet: -</div>
    <div id="walletBal">SOMI: -</div>
    <button id="btnPlay">Play Game</button>
    <button id="btnLeaderboard">Leaderboard</button>
  </div>

  <div id="main">

    <div id="title">‚òÉÔ∏è SOMNIA CHRISTMAS CARNIVAL üéÑ</div>

    <div id="topScoreSummary" style="color:#fff;padding:10px;margin-bottom:12px;border-radius:6px;background:rgba(0,0,0,0.4);width:100%;max-width:480px;text-align:center;">
      üí∞ <b>Jackpot:</b> <span id="poolValue">0.00 SOMI</span> |
      üèÜ <b>Top:</b> <span id="topScoreValue">0</span>
    </div>

    <div class="content-area">

      <div id="logoPlaceholder">
        <img src="assets/logo1.png" alt="Somnia Logo">
        <div id="poster-overlay">
          <h2>SOMNIA CHRISTMAS!</h2>
          <p>Main & menangkan Jackpot Natal üéÅ</p>
          <button class="overlay-cta" onclick="btnPlay.click()">Mulai</button>
        </div>
      </div>

      <iframe id="gameFrame" src="./pacman/pacman_xmas.html"></iframe>
      <iframe id="leaderFrame" src="leaderboard.html"></iframe>

    </div>

    <div class="footer">created by: ifunkkalem | @Ifunkkalem91</div>
  </div>
</div>

<script>
const btnConnect=document.getElementById('btnConnect');
const btnPlay=document.getElementById('btnPlay');
const btnLeaderboard=document.getElementById('btnLeaderboard');
const walletAddrEl=document.getElementById('walletAddr');
const walletBalEl=document.getElementById('walletBal');
const gameFrame=document.getElementById('gameFrame');
const leaderFrame=document.getElementById('leaderFrame');
const logoPlaceholder=document.getElementById('logoPlaceholder');

function showMain(id){
  logoPlaceholder.style.display='none';
  gameFrame.style.display='none';
  leaderFrame.style.display='none';
  document.getElementById(id).style.display='block';
}

btnPlay.onclick=()=>{
  gameFrame.contentWindow.postMessage({type:"paySuccess"},"*");
  showMain('gameFrame');
};

btnLeaderboard.onclick=()=>{
  showMain('leaderFrame');
};

showMain('logoPlaceholder');
</script>

</body>
</html>
